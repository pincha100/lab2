<!DOCTYPE html>
<html>
    <head>
        <title>Жуков Олег ФБИ-03 Расчетно-графическая работа</title>
		<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/ui-lightness/jquery.ui.slider.css" type="text/css" media="all" />
		<link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
		<link rel="stylesheet" href="css/thumbnail_slider.css" type="text/css" media="screen"/>
    </head>
    <body>
		<div class="header">
			<h1>Жуков Олег ФБИ-03 Расчетно-графическая работа</h1>
			<div id="pg_scrollWrapper" class="pg_scrollWrapper">
				<div id="slider" class="slider"></div>
			</div>
		</div>
		<div class="wall">
			<div id="pg_container" class="pg_container">
				<ul id="pg_photos" class="pg_photos">
					<li><a href="#1"><img src="images/1.jpg" alt="Папич-берсерк"/></a></li>
					<li><a href="#2"><img src="images/2.jpg" alt="Злой тейлз"/></a></li>
					<li><a href="#3"><img src="images/3.jpg" alt="Терминатор в Новый год"/></a></li>
					<li><a href="#4"><img src="images/4.jpg" alt="Не знаю"/></a></li>
					<li><a href="#5"><img src="images/5.jpg" alt="Согласен"/></a></li>
					<li><a href="#6"><img src="images/6.jpg" alt="Это его путь ниндзя"/></a></li>
					<li><a href="#7"><img src="images/7.jpg" alt="Лёха привет"/></a></li>
					<li><a href="#8"><img src="images/8.jpg" alt="Идём на разборки"/></a></li>
					<li><a href="#9"><img src="images/9.jpg" alt="Мёд"/></a></li>
					<li><a href="#10"><img src="images/10.jpg" alt="Devilman"/></a></li>
					<li><a href="#11"><img src="images/11.jpg" alt="Nadia"/></a></li>
					<li><a href="#12"><img src="images/12.jpg" alt="Gigachad"/></a></li>
					<li><a href="#13"><img src="images/13.jpg" alt="Семья"/></a></li>
					<li><a href="#14"><img src="images/14.jpg" alt="Лукашенко бэтмен"/></a></li>
					<li><a href="#15"><img src="images/15.jpg" alt="Искажение"/></a></li>
					<li><a href="#16"><img src="images/16.jpg" alt="Sonic Frontiers"/></a></li>
					<li><a href="#17"><img src="images/17.jpg" alt="Трио"/></a></li>
					<li><a href="#18"><img src="images/18.jpg" alt="Вегета"/></a></li>
					<li><a href="#19"><img src="images/19.jpg" alt="Лошадь прикол"/></a></li>
					<li><a href="#20"><img src="images/20.jpg" alt="Максим"/></a></li>
				</ul>
			</div>
		</div>

		<div class="footer">
			<div class="thumbnailSlider" id="thumbnailSlider">
				<ul class="ts_container">
					<li><a href="#1">Image 1</a></li>
					<li><a href="#2">Image 2</a></li>
					<li><a href="#3">Image 3</a></li>
					<li><a href="#4">Image 4</a></li>
					<li><a href="#5">Image 5</a></li>
					<li><a href="#6">Image 6</a></li>
					<li><a href="#7">Image 7</a></li>
					<li><a href="#8">Image 8</a></li>
					<li><a href="#9">Image 9</a></li>
					<li><a href="#10">Image 10</a></li>
					<li><a href="#11">Image 11</a></li>
					<li><a href="#12">Image 12</a></li>
					<li><a href="#13">Image 13</a></li>
					<li><a href="#14">Image 14</a></li>
					<li><a href="#15">Image 15</a></li>
					<li><a href="#16">Image 16</a></li>
					<li><a href="#17">Image 17</a></li>
					<li><a href="#18">Image 18</a></li>
					<li><a href="#19">Image 19</a></li>
					<li><a href="#20">Image 20</a></li>
					<li class="ts_thumbnails">
						<div class="ts_preview_wrapper">
							<ul class="ts_preview">
								<li><img src="images/thumbs/1.jpg" alt="Thumb 1" /></li>
								<li><img src="images/thumbs/2.jpg" alt="Thumb 2" /></li>
								<li><img src="images/thumbs/3.jpg" alt="Thumb 3" /></li>
								<li><img src="images/thumbs/4.jpg" alt="Thumb 4" /></li>
								<li><img src="images/thumbs/5.jpg" alt="Thumb 5" /></li>
								<li><img src="images/thumbs/6.jpg" alt="Thumb 6" /></li>
								<li><img src="images/thumbs/7.jpg" alt="Thumb 7" /></li>
								<li><img src="images/thumbs/8.jpg" alt="Thumb 8" /></li>
								<li><img src="images/thumbs/9.jpg" alt="Thumb 9" /></li>
								<li><img src="images/thumbs/10.jpg" alt="Thumb 10" /></li>
								<li><img src="images/thumbs/11.jpg" alt="Thumb 11" /></li>
								<li><img src="images/thumbs/12.jpg" alt="Thumb 12" /></li>
								<li><img src="images/thumbs/13.jpg" alt="Thumb 13" /></li>
								<li><img src="images/thumbs/14.jpg" alt="Thumb 14" /></li>
								<li><img src="images/thumbs/15.jpg" alt="Thumb 15" /></li>
								<li><img src="images/thumbs/16.jpg" alt="Thumb 16" /></li>
								<li><img src="images/thumbs/17.jpg" alt="Thumb 17" /></li>
								<li><img src="images/thumbs/18.jpg" alt="Thumb 18" /></li>
								<li><img src="images/thumbs/19.jpg" alt="Thumb 19" /></li>
								<li><img src="images/thumbs/20.jpg" alt="Thumb 20" /></li>
							</ul>
						</div>
					</li>
				</ul>
			</div>
		</div>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
		<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
		<script type="text/javascript" src="js/jquery.ba-hashchange.min.js"></script>
		<script type="text/javascript" src="js/jquery-mousewheel-3.0.4/jquery.mousewheel.min.js"></script>
		
        <script type="text/javascript">

			(function($) {
				$.fn.preload = function(options) {
					var opts 	= $.extend({}, $.fn.preload.defaults, options);
					o			= $.meta ? $.extend({}, opts, this.data()) : opts;
					var c		= this.length,
						l		= 0;
					return this.each(function() {
						var $i	= $(this);
						$('<img/>').load(function(i){
							++l;
							if(l == c) o.onComplete();
						}).attr('src',$i.attr('src'));	
					});
				};
				$.fn.preload.defaults = {
					onComplete	: function(){return false;}
				};
			})(jQuery);
		</script>
		<script type="text/javascript">

			(function($) {
				
				var methods = {
					init 	: function(options) {
					var opts = $.extend({}, $.fn.thumbnailSlider.defaults, options);
					return this.each(function() {
						var $this 				= $(this),
						o 					= $.meta ? $.extend({}, opts, $pxs_container.data()) : opts;

						var $ts_container		= $this.children('.ts_container'),
						$ts_thumbnails		= $ts_container.children('.ts_thumbnails'),
						$nav_elems			= $ts_container.children('li').not($ts_thumbnails),
						total_elems			= $nav_elems.length,
						$ts_preview_wrapper	= $ts_thumbnails.children('.ts_preview_wrapper'),
						$arrow				= $ts_thumbnails.children('span'),
						$ts_preview			= $ts_preview_wrapper.children('.ts_preview');

						var w_ts_thumbnails	= o.thumb_width + 2*5,
						h_ts_thumbnails	= o.thumb_height + 2*5 + 6,
						t_ts_thumbnails	= -(h_ts_thumbnails + 5),
						$first_nav		= $nav_elems.eq(0),
						l_ts_thumbnails	= $first_nav.position().left - 0.5*w_ts_thumbnails + 0.5*$first_nav.width();

						$ts_thumbnails.css({
							width	: w_ts_thumbnails + 'px',
							height	: h_ts_thumbnails + 'px',
							top		: t_ts_thumbnails + 'px',
							left	: l_ts_thumbnails + 'px'
						});

						var t_arrow	= o.thumb_height + 2*5,
						l_arrow	= (o.thumb_width + 2*5) / 2 - $arrow.width() / 2;
						$arrow.css({
							left	: l_arrow + 'px',
							top		: t_arrow + 'px'
						});

						$ts_preview.css('width' , total_elems*o.thumb_width + 'px');

						$ts_preview_wrapper.css({
							width	: o.thumb_width + 'px',
							height	: o.thumb_height + 'px'
						});

						$nav_elems.bind('mouseenter',function(){
							var $nav_elem	= $(this),
							idx			= $nav_elem.index();

							var new_left	= $nav_elem.position().left - 0.5*w_ts_thumbnails + 0.5*$nav_elem.width();

							$ts_thumbnails.stop(true)
							.show()
							.animate({
								left	: new_left + 'px'
							},o.speed,o.easing);

							$ts_preview.stop(true)
							.animate({
								left	: -idx*o.thumb_width + 'px'
							},o.speed,o.easing);

							if(o.zoom && o.zoomratio > 1){
								var new_width	= o.zoomratio * o.thumb_width,
								new_height	= o.zoomratio * o.thumb_height;

								var ts_preview_w	= $ts_preview.width();
								$ts_preview.css('width' , (ts_preview_w - o.thumb_width + new_width)  + 'px');

								$ts_preview.children().eq(idx).find('img').stop().animate({
									width		: new_width + 'px',
									height		: new_height + 'px'
								},o.zoomspeed);
							}

						}).bind('mouseleave',function(){

							if(o.zoom && o.zoomratio > 1){
								var $nav_elem	= $(this),
								idx			= $nav_elem.index();
								$ts_preview.children().eq(idx).find('img').stop().css({
									width	: o.thumb_width + 'px',
									height	: o.thumb_height + 'px'
								});
							}

							$ts_thumbnails.stop(true)
							.hide();

						}).bind('click',function(e){
							var $nav_elem	= $(this),
							idx			= $nav_elem.index();
							$nav_elems.removeClass('selected').eq(idx).addClass('selected');
							o.onClick(idx);
								
						});
					});
					},
					update 	: function(idx) {
						return this.each(function(){
							var $this 			= $(this),
								$ts_container	= $this.children('.ts_container'),
								$ts_thumbnails	= $ts_container.children('.ts_thumbnails'),
								$nav_elems		= $ts_container.children('li').not($ts_thumbnails);
							$nav_elems.removeClass('selected').eq(idx).addClass('selected');
						});	
					}
				};
				
				$.fn.thumbnailSlider = function(method) {
					if ( methods[method] ) {
						return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
					} else if ( typeof method === 'object' || ! method ) {
						return methods.init.apply( this, arguments );
					} else {
						$.error( 'Method ' +  method + ' does not exist on jQuery.thumbnailSlider' );
					}  
				};
				$.fn.thumbnailSlider.defaults = {
					speed		: 100,
					easing		: 'jswing',
					thumb_width	: 75,
					thumb_height: 75,
					zoom		: false,
					zoomratio	: 1.3,
					zoomspeed	: 15000,
					onClick		: function(){return false;}
				};
			})(jQuery);
		</script>
		<script type="text/javascript">
			$(function() {
				var $thumbnailSlider= $('#thumbnailSlider'),
					$slider			= $('#slider'),
					$pg_photos		= $('#pg_photos'),
					$pg_container	= $('#pg_container'),
					$pg_scrollWrapper	= $('#pg_scrollWrapper'),
					$pg_photos_elem	= $pg_photos.children(),
					$pg_photos_img	= $pg_photos_elem.find('img'),
					is_safari = navigator.userAgent.toLowerCase().indexOf('safari') > -1 
								&& 
									  navigator.userAgent.toLowerCase().indexOf('chrome') == -1,
					pg_photos_width	= 0;				  
								
				$pg_photos_img.preload({
					onComplete	: function(){
						init();

						$(window).hashchange();
					}
				});
				function init(){
					initThumbnailSlider();
					configGallery();
					initSlider();
					initEvents();
				}

				function initThumbnailSlider(){
					$thumbnailSlider.thumbnailSlider({
							thumb_width	: 75,
						thumb_height: 75
						});
				}
				function configGallery(){
					$('BODY').css('overflow-x','hidden');

						$pg_photos.children().each(function(){
							pg_photos_width += $(this).outerWidth(true);
						});
						$pg_photos.css('width',pg_photos_width+'px');
				}
				function initSlider(){
					$pg_scrollWrapper.show();

					var old_value 	= 0, 
						dir			= 1; 	
						$slider.slider('destroy').slider({
							orientation	: 'horizontal',
							max			: pg_photos_width - $pg_photos.children(':last').outerWidth(true),
							min			: 0,
							value		: 0,
							slide		: function(event, ui) {
								$pg_photos.css('left',-ui.value+'px');						

								if(is_safari){

								dir 		= (old_value < ui.value) ? 1 : -1;
								old_value 	= ui.value;	
									if(dir == 1 && !$pg_container.hasClass('turnLeft'))	
									$pg_container.addClass('turnLeft')
												 .removeClass('turnRight flat');
									else if(dir == -1 && !$pg_container.hasClass('turnRight'))	
									$pg_container.addClass('turnRight')
												 .removeClass('turnLeft flat');
								}	
							},
							stop: function(event, ui) {
								if(is_safari){
									$pg_container.addClass('flat')
											 .removeClass('turnLeft turnRight');
								}			 
							}
						});
				}
				function initEvents(){

					$pg_photos_elem.bind('mouseenter',function(e){
						var $e		= $(this);
							$img	= $e.find('img'),
							descr	= $img.attr('alt');
						
						$('<span>'+ descr +'</span>').hide().insertAfter($img).fadeIn();
					}).bind('mouseleave',function(e){
						var $e		= $(this);
							$descr	= $e.find('span');
						
						$descr.fadeOut();
				});
				
						$pg_container.mousewheel(function(e, delta) {
						var speed	= 450,
							inc 	= -delta*speed,
								min	= $slider.slider('option','min'),
								max = $slider.slider('option','max');
							
							var val = $slider.slider('value') + inc;
							if(val < min)
								val = min;
							else if(val > max)
								val = max;
							
							$slider.slider('value', val);
						$pg_photos.stop().animate({
								left	: -(val) + 'px'
						},800,'easeOutExpo',function(){
							if(is_safari){
								$pg_container.addClass('flat')
											 .removeClass('turnLeft turnRight');
							}	
						});
						if(is_safari){
							if(delta < 0 && !$pg_container.hasClass('turnLeft'))	
								$pg_container.addClass('turnLeft')
											 .removeClass('turnRight flat');
							else if(delta > 0 && !$pg_container.hasClass('turnRight'))	
								$pg_container.addClass('turnRight')
											 .removeClass('turnLeft flat');
						}
							return false;
						});
						
						$(window).hashchange( function(){

							var idx 			= location.hash.split('#')[1];
						if(!idx){

							$thumbnailSlider.thumbnailSlider('update',0);
							return;
						}

						$thumbnailSlider.thumbnailSlider('update',idx-1);

							var	current_left 	= parseFloat($pg_photos.css('left'),10),
							elem_left		= $pg_photos_elem.eq(idx-1).offset().left;

							$slider.slider('value',Math.abs(parseInt(current_left - elem_left,10)));

							$pg_photos.stop().animate({
								left	: current_left - elem_left + 'px'
							},800,'easeInOutExpo');
						});
					}
			});
        </script>
    </body>
</html>